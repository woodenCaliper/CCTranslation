# CCTranslation アプリケーション SPEC

## プロジェクト概要
- **プロジェクト名**: CCTranslation
- **作成日**: 2024年
- **開発方式**: KIRO式

## 1. 基本情報


### 1.1 アプリの目的
Windows常駐型の翻訳ユーティリティ。  
ユーザーが Ctrl + C を短時間で 2 回押すことでクリップボードのテキストを翻訳し、ポップアップで表示する。  
素早い翻訳作業を支援し、作業効率を向上させる。

### 1.2 ターゲットユーザー
- 文書作成・翻訳作業を行うビジネスパーソン
- プログラミング・技術文書を扱う開発者
- 学術論文・資料を扱う研究者・学生
- 日常的に多言語テキストを扱うユーザー

### 1.3 プラットフォーム
Windows デスクトップアプリケーション（常駐型）
- **対応OS**: Windows 10 (最低限) / Windows 11
- **アーキテクチャ**: x64 (64bit)
- **動作環境**: .NET Framework 4.8 以降または .NET 6 以降

## 2. 機能要件

### 2.1 主要機能
- **ホットキー翻訳**: Ctrl + C の連続押下でクリップボード翻訳実行
- **ポップアップ表示**: 翻訳結果を非侵入的なポップアップで表示
- **自動言語判別**: 翻訳元言語の自動検出
- **Google翻訳API連携**: Google Translate API を使用した高精度翻訳
- **システム常駐**: バックグラウンドでの常時監視

### 2.2 サブ機能
- **翻訳先言語設定**: ユーザーが翻訳先言語を指定可能
- **翻訳履歴**: 過去の翻訳結果の保存・参照
- **設定画面**: ホットキー、翻訳先言語、API設定の管理
- **システムトレイ**: 最小化時のトレイアイコン表示
- **ショートカット設定**: ホットキーのカスタマイズ

### 2.3 データ要件
- **入力データ**: クリップボードのテキスト（UTF-8形式）
- **出力データ**: 翻訳結果テキスト
- **設定データ**: 翻訳先言語、API設定、ホットキー設定
- **履歴データ**: 翻訳履歴（原文、翻訳文、日時）
- **言語情報**: Google翻訳APIがサポートする言語リスト

## 3. 技術要件

### 3.1 開発環境
- **開発言語**: Python 3.9+
- **フレームワーク**: 
  - GUI: tkinter (標準ライブラリ) または PyQt/PySide
  - 常駐アプリ: pystray (システムトレイ)
  - ホットキー: pynput (クロスプラットフォーム、日本語キーボード対応)
  - HTTP通信: requests
- **データベース**: 不要（ファイルベースの設定・履歴保存）
- **その他ライブラリ**: 
  - googletrans (無料Google翻訳)
  - pyperclip (クリップボード操作)
  - configparser (設定ファイル管理)
  - pywin32 (Windows API アクセス)
  - google-fonts (Noto Sans JP / Roboto フォント) 

### 3.2 システム構成
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   ユーザー操作    │    │   CCTranslation  │    │  Google翻訳API  │
│                 │    │                 │    │                 │
│ Ctrl+C (連続)   │───▶│ クリップボード監視 │    │                 │
│                 │    │ ホットキー検出   │    │                 │
└─────────────────┘    │ ポップアップ表示 │◀───│ 翻訳処理        │
                       │ 設定管理        │    │                 │
                       │ 履歴保存        │    │                 │
                       └─────────────────┘    └─────────────────┘
```

**主要コンポーネント**:
- メインアプリケーション (Python)
- ホットキー監視モジュール (pynput使用)
- クリップボード監視モジュール  
- 翻訳処理モジュール (googletrans使用)
- ポップアップ表示モジュール
- 設定・履歴管理モジュール

## 4. 非機能要件

### 4.1 パフォーマンス要件
- **レスポンス時間**: ホットキー検出から翻訳結果表示まで 3秒以内
- **同時接続数**: 単一ユーザー使用（同時接続不要）
- **データ処理量**: クリップボードテキスト（最大10,000文字程度）
- **メモリ使用量**: 50MB以下
- **CPU使用率**: アイドル時5%以下 

### 4.2 セキュリティ要件
- **データ保護**: 翻訳履歴はローカルファイルに暗号化保存
- **API制限**: googletransライブラリの制限内での使用
- **プライバシー**: 翻訳データはGoogle翻訳に送信される（利用規約に従う）
- **権限**: 管理者権限不要でインストール・実行可能

### 4.3 可用性要件
- **稼働時間**: システム起動時に自動開始、24時間常駐可能
- **バックアップ**: 設定ファイルと翻訳履歴のローカル保存
- **エラー処理**: ネットワークエラー時の適切なエラーメッセージ表示
- **復旧**: アプリケーションクラッシュ時の自動再起動機能 

## 5. UI/UX要件

### 5.1 画面構成
- **メイン画面**: シンプルな翻訳画面（最低限のUI）
  - 翻訳前言語選択（デフォルト：自動選択）
  - 翻訳先言語選択（前回値を引き継ぎ）
  - 翻訳結果をクリップボードにコピーボタン
  - 翻訳前文章表示エリア
  - 翻訳後文章表示エリア
- **システムトレイ**: CCT_icon.ico表示、右クリックメニュー
- **設定画面**: ホットキー設定、その他設定（必要最小限）

### 5.2 デザイン要件
- **カラーパレット**: Windows 10/11のダークモード・ライトモード対応
- **フォント**: Google翻訳と同様のフォント（Noto Sans JP / Roboto）
- **レイアウト**: 最低限のシンプルデザイン、縦型レイアウト
- **アクセシビリティ**: 高DPI対応、キーボードナビゲーション対応
- **ウィンドウサイズ**: リサイズ可能（最小サイズ：400x600px、初期サイズ：500x700px）
- **分割可能**: 翻訳前後エリアの境界をマウスで上下調整可能
- **テキストエリア**: 文章量に応じて自動調整、最大サイズ制限でスクロール対応

### 5.3 メイン画面レイアウト詳細
```
┌─────────────────────────────────────┐
│ CCTranslation                       │ ← タイトルバー（リサイズ可能）
├─────────────────────────────────────┤
│ 翻訳前言語: [自動選択 ▼]              │ ← 言語選択エリア
│ 翻訳先言語: [日本語 ▼]                │
├─────────────────────────────────────┤
│ 翻訳前の文章                         │
│ ┌─────────────────────────────────┐ │ ← 翻訳前テキストエリア
│ │ Hello, how are you?             │ │   （自動調整・スクロール対応）
│ │ This is a sample text.          │ │
│ │ [自動調整: 80px～300px]          │ │
│ └─────────────────────────────────┘ │
├═══━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━══┤ ← 分割バー（ドラッグ可能）
│ 翻訳後の文章                         │
│ ┌─────────────────────────────────┐ │ ← 翻訳後テキストエリア
│ │ こんにちは、お元気ですか？        │ │   （自動調整・スクロール対応）
│ │ これはサンプルテキストです。       │ │
│ │ [自動調整: 80px～300px]          │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│              [コピー]               │ ← 固定ボタンエリア
└─────────────────────────────────────┘
```

**UI操作詳細**:
- **ウィンドウリサイズ**: 右下角をドラッグしてウィンドウ全体のサイズ変更
- **分割バー**: 翻訳前後エリアの境界を上下ドラッグして高さ調整
- **最小サイズ**: 400x600px（これ以下は縮小不可）
- **初期サイズ**: 500x700px

**テキストエリア仕様**:
- **自動調整**: 文章量に応じて高さを自動調整
- **最小高さ**: 80px（短い文章でも読みやすい高さを確保）
- **最大高さ**: 300px（長い文章の場合はスクロール表示）
- **スクロール**: 縦スクロールバーで長文対応
- **折り返し**: テキストの自動折り返し（改行なしテキスト対応）
- **フォント**: Google翻訳と同様のフォント（Noto Sans JP / Roboto）

**システムトレイ仕様**:
- **アイコン**: icon/CCT_icon.ico
- **ツールチップ**: "CCTranslation - 翻訳ユーティリティ"
- **右クリックメニュー**: 
  - 設定画面を開く
  - 翻訳履歴を表示
  - Exit（アプリケーションを終了）

## 6. 開発計画

### 6.1 マイルストーン
- **Phase 1**: 
- **Phase 2**: 
- **Phase 3**: 

### 6.2 リリース計画
- **Alpha版**: 
- **Beta版**: 
- **正式版**: 

## 7. 運用要件

### 7.1 デプロイ環境
<!-- 本番環境の構成 -->

### 7.2 監視・ログ
<!-- 運用監視の要件 -->

## 8. その他

### 8.1 制約事項
- **API制限**: googletransライブラリの無料版制限（リクエスト頻度制限）
- **ネットワーク依存**: インターネット接続必須
- **プラットフォーム**: Windows 10/11専用
- **権限**: 管理者権限不要（ただし、一部ホットキー機能で制限の可能性）
- **キーボード対応**: 日本語キーボード（半角全角変換キー）対応のためpynput使用必須

### 8.2 前提条件
- **開発環境**: Python 3.9+, Visual Studio Code または PyCharm
- **実行環境**: Windows 10/11 (x64), Python 3.9+ ランタイム
- **ネットワーク**: Google翻訳APIへのアクセス可能なインターネット接続
- **依存ライブラリ**: requirements.txtで管理されるPythonパッケージ
- **リソースファイル**: icon/CCT_icon.ico（システムトレイアイコン）

---

**更新履歴**
- 2024-XX-XX: 初版作成
